# 2026-02-09 - Session Memory Loss Incident

## Critical Issue Discovered
**Problem:** Session compaction wiped yesterday's conversation context (including "streamer project" discussion).

**Root Cause:** 
- Session transcripts auto-compact at ~200k tokens
- Auto-flush before compaction failed to capture key decisions
- Memory not explicitly written to `memory/YYYY-MM-DD.md`
- Result: Work lost from session context

## Recovery Actions Taken
1. Located backup in `projects/murphe-oi/` git repo ✅
2. Confirmed architecture docs intact ✅
3. Verified routing logic, communication patterns ✅

## Prevention Protocols Established

### For Murphe (Agent):
1. **Explicit memory writes** after significant conversations - don't rely on auto-flush
2. **Checkpoint command** - user can say "checkpoint" to force immediate write
3. **Pre-approval for long tasks** - creates decision record
4. **Treat git as truth** - session memory is ephemeral

### For User:
1. Say "checkpoint" or "write this to memory" anytime
2. "Wait" before long tasks to allow explicit memory commit
3. Use git for important decisions (backup)

## What Was Lost
- "Streamer project" details - discussed yesterday, not captured
- Any ad-hoc decisions from that specific session

## What Survived (Git Backup)
- 5-tier architecture (Kimi→Haiku→Codex→Sonnet→Opus)
- Cost target: <$1/day
- Communication patterns
- Tool profiles
- Routing logic
- Repository organization

## Technical Fixes Applied
1. Switched memory search to **local embeddings** (OpenAI quota issue)
2. Memory search now uses `hf:ggml-org/embeddinggemma-300M-Q8_0` model
3. Gateway restarted with new config

## Lesson
**Git > Session Memory**
Session context can be lost. Disk/Git persists. Critical decisions should be explicitly written or committed.

---
*Last updated: 2026-02-09 17:26 UTC*